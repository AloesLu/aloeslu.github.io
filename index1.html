<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>AloesLu</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="AloesLu">
<meta property="og:url" content="https://github.com/AloesLu/index.html">
<meta property="og:site_name" content="AloesLu">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="AloesLu">
  
    <link rel="alternate" href="/atom.xml" title="AloesLu" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">AloesLu</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://github.com/AloesLu"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-2016-10-26-重新认识Objective-C第一篇" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/26/2016-10-26-重新认识Objective-C第一篇/" class="article-date">
  <time datetime="2016-10-26T07:39:11.000Z" itemprop="datePublished">2016-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/26/2016-10-26-重新认识Objective-C第一篇/">2016-10-26 重新认识Objective-C第一篇</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-oc区别于c-、java采用消息结构，而非函数调用。"><a href="#1-oc区别于c-、java采用消息结构，而非函数调用。" class="headerlink" title="1.oc区别于c++、java采用消息结构，而非函数调用。"></a>1.oc区别于c++、java采用消息结构，而非函数调用。</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">// Messaging (Objective-C)</div><div class="line">Object *obj = [Object new];</div><div class="line">[obj performWith:parameter1 and parameter2];</div><div class="line"></div><div class="line">// Function Calling (C++)</div><div class="line">Object *obj = new Object;</div><div class="line">obj-&gt;perform(parameter1,parameter2);</div></pre></td></tr></table></figure>
<ul>
<li>使用消息结构的语言，其运行时所应执行的代码有运行环境来决定；而使用函数调用的语言，则由编译器决定。正是这种消息结构，导致了oc运行时的动态绑定。个人理解，runtime机制也与此有关。</li>
</ul>
<h3 id="2-oc所有面向对象特性所需的全部数据结构及函数都在运行期组件里面。"><a href="#2-oc所有面向对象特性所需的全部数据结构及函数都在运行期组件里面。" class="headerlink" title="2.oc所有面向对象特性所需的全部数据结构及函数都在运行期组件里面。"></a>2.oc所有面向对象特性所需的全部数据结构及函数都在运行期组件里面。</h3><ul>
<li>运行期组件本质上就是一种与开发者所编代码相链接的“动态库”，其代码能把开发者编写的所有程序粘和起来。运行期组件不需要编译，更新提升应用程序性能便捷。</li>
</ul>
<h3 id="3-oc中在-h中尽量使用-class向前声明，降低耦合，减少编译时间。"><a href="#3-oc中在-h中尽量使用-class向前声明，降低耦合，减少编译时间。" class="headerlink" title="3.oc中在.h中尽量使用@class向前声明，降低耦合，减少编译时间。"></a>3.oc中在.h中尽量使用@class向前声明，降低耦合，减少编译时间。</h3><ul>
<li>当需要声明某各类遵循一项协议，尽量把“该类遵循某协议”的这条声明移至“class-continuation分类”中。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//class-continuation其实就是在.m文件中</div><div class="line">@interface xxxxxx()&lt;某协议&gt;&#123;</div><div class="line">&#125;</div><div class="line">@end</div></pre></td></tr></table></figure>
<ul>
<li>如果不行的话，就把协议单独放在一个头文件中，然后将其引入。（避免协议里其它不必要的头文件的引入）</li>
</ul>
<h3 id="4-多使用字面量语法"><a href="#4-多使用字面量语法" class="headerlink" title="4.多使用字面量语法"></a>4.多使用字面量语法</h3><ul>
<li>字面量语法的使用</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">NSString *str = @&quot;字面量语法&quot;;</div><div class="line">NSNumber *num = @1;</div><div class="line">NSArray *arry = @[@&quot;1&quot;,@&quot;22&quot;,@&quot;333&quot;];</div><div class="line">arry[1];</div><div class="line">NSDictionary *dict = @&#123;@&quot;firstName&quot;:@&quot;aloes&quot;,@&quot;lastName&quot;:@&quot;lu&quot;&#125;;</div><div class="line">dict[@&quot;firstName&quot;];</div></pre></td></tr></table></figure>
<ul>
<li>注意：<br>除了NSString以外，要使用字面量，所创建的对象必须属于Foundation框架才行。自定义之类无法使用字面量。<br>字面量创建的数组、字典均为不可变<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSMutableArray *mutable=[@[@1,@2,@3] mutableCopy];</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="5-多使用类型常量"><a href="#5-多使用类型常量" class="headerlink" title="5.多使用类型常量"></a>5.多使用类型常量</h3><ul>
<li>const修饰的常量，有无static的区别</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//作用域（当前文件可使用）</div><div class="line">static const NSTimeInterval kAnimationDuration = 1.0;</div><div class="line">//编译器会添加“外部符号”，作用域（整个项目，其他文件有相同命名会冲突）</div><div class="line">const NSTimeInterval kAnimationDuration = 1.0;</div></pre></td></tr></table></figure>
<ul>
<li>const修饰位置对只读的区别</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//对象只读</div><div class="line">static const NSString *str = @&quot;常量&quot;;</div><div class="line">//指针只读</div><div class="line">static NSString * const str = @&quot;常量&quot;;</div></pre></td></tr></table></figure>
<ul>
<li>常值变量的使用，定义全局符号表</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//.h文件中</div><div class="line">extern NSString * const EatStringConstant;</div><div class="line">//.m文件中</div><div class="line">NSString *const EatStringConstant = @&quot;eat key&quot;;</div></pre></td></tr></table></figure>
<h3 id="6-枚举的使用"><a href="#6-枚举的使用" class="headerlink" title="6.枚举的使用"></a>6.枚举的使用</h3><ul>
<li>是否使用typedef修饰的区别</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//使用: enum MHBlankPageType type = MHBlankPageTypeView;</div><div class="line">enum MHBlankPageType&#123;</div><div class="line">    MHBlankPageTypeView = 0,</div><div class="line">    MHBlankPageTypeHeadline,</div><div class="line">    MHBlankPageTypeCircle,</div><div class="line">&#125;;</div><div class="line">//使用: MHBlankPageType type = MHBlankPageTypeView;</div><div class="line">typedef enum MHBlankPageType MHBlankPageType;</div><div class="line">enum MHBlankPageType&#123;</div><div class="line">    MHBlankPageTypeView = 0,</div><div class="line">    MHBlankPageTypeHeadline,</div><div class="line">    MHBlankPageTypeCircle,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>“按位或操作符”组合枚举，主要应用在需要返回一个枚举值，但要包括两种以上枚举值时。通过或运算MHBlankPageTypeHeadline | MHBlankPageTypeCircle即可完成。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">enum MHBlankPageType&#123;</div><div class="line">    MHBlankPageTypeView     = 0,</div><div class="line">    MHBlankPageTypeHeadline = 1 &lt;&lt; 0,</div><div class="line">    MHBlankPageTypeCircle   = 1 &lt;&lt; 1,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<ul>
<li>系统定义宏枚举，c++编译模式下不允许底层类型“隐式转换”。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">//枚举不需要相互组合</div><div class="line">typedef NS_ENUM(NSInteger, MHBlankPageType)</div><div class="line">&#123;</div><div class="line">	MHBlankPageTypeView = 0,</div><div class="line">	MHBlankPageTypeHeadline,</div><div class="line">	MHBlankPageTypeCircle,</div><div class="line">&#125;;</div><div class="line">//枚举需要相互组合</div><div class="line">typedef NS_OPTIONS(NSInteger, MHBlankPageType)</div><div class="line">&#123;</div><div class="line">	MHBlankPageTypeView     = 0,</div><div class="line">	MHBlankPageTypeHeadline = 1 &lt;&lt; 0,</div><div class="line">	MHBlankPageTypeCircle   = 1 &lt;&lt; 1,</div><div class="line">&#125;;</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/AloesLu/2016/10/26/2016-10-26-重新认识Objective-C第一篇/" data-id="ciuqma3zu0000yhyn4o6uw3nx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-10-09-github和gitlab同时使用ssh-key" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/09/2016-10-09-github和gitlab同时使用ssh-key/" class="article-date">
  <time datetime="2016-10-09T02:51:42.000Z" itemprop="datePublished">2016-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/09/2016-10-09-github和gitlab同时使用ssh-key/">2016-10-09 github和gitlab同时使用ssh-key</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ssh管理多个ssh key, 并且在多个平台使用（github、gitlab）</p>
<h3 id="1-设置或全局设置-–global-使用git的账户名称和邮箱"><a href="#1-设置或全局设置-–global-使用git的账户名称和邮箱" class="headerlink" title="1.设置或全局设置(–global)使用git的账户名称和邮箱"></a>1.设置或全局设置(–global)使用git的账户名称和邮箱</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git config --global user.name <span class="string">"AloesLu"</span></div><div class="line">git config --global user.email <span class="string">"AloesLu@gmail.com"</span></div></pre></td></tr></table></figure>
<h3 id="2-生成ssh-keygen"><a href="#2-生成ssh-keygen" class="headerlink" title="2.生成ssh-keygen"></a>2.生成ssh-keygen</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">gitlab:</div><div class="line">ssh-keygen -t rsa -C “xxxxxx@vomoho.com<span class="string">"</span></div><div class="line">github:</div><div class="line">ssh-keygen -t rsa -C “xxxxxx@qq.com"</div><div class="line">生成第二个keygen的时候, 先输入文件保存名称, 再按三下回车. 否则前一个id_rsa会被覆盖.</div></pre></td></tr></table></figure>
<h3 id="3-添加ssh-add"><a href="#3-添加ssh-add" class="headerlink" title="3.添加ssh-add"></a>3.添加ssh-add</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ssh-add ~/.ssh/id_rsa</div><div class="line">ssh-add ~/.ssh/id_rsa_github</div></pre></td></tr></table></figure>
<p>如果ssh-add时提示”Could not open a connection to your authentication agent”<br>就先执行 ssh-agent bash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">//可以通过 ssh-add <span class="_">-l</span> 来确私钥列表</div><div class="line">ssh-add <span class="_">-l</span></div><div class="line">//可以通过 ssh-add -D 来清空私钥列表</div><div class="line">ssh-add -D</div></pre></td></tr></table></figure>
<h3 id="4-添加ssh-add"><a href="#4-添加ssh-add" class="headerlink" title="4.添加ssh-add"></a>4.添加ssh-add</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">touch config</div><div class="line">编辑config文件如下:</div><div class="line"><span class="comment"># gitlab</span></div><div class="line">Host gitlab.com</div><div class="line">    HostName gitlab.com</div><div class="line">    PreferredAuthentications publickey</div><div class="line">    User git</div><div class="line">    IdentityFile ~/.ssh/id_rsa</div><div class="line"></div><div class="line"><span class="comment"># github</span></div><div class="line">Host github.com</div><div class="line">    HostName github.com</div><div class="line">    PreferredAuthentications publickey</div><div class="line">    User git</div><div class="line">    IdentityFile ~/.ssh/id_rsa_github</div></pre></td></tr></table></figure>
<h3 id="5-测试权限"><a href="#5-测试权限" class="headerlink" title="5.测试权限"></a>5.测试权限</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ssh -T git@github.com</div><div class="line">Hi AloesLu! You<span class="string">'ve successfully authenticated, but GitHub does not provide shell access.</span></div><div class="line">ssh -T git@gitlab.vomoho.com</div><div class="line">Welcome to GitLab, AloesLu!</div></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/AloesLu/2016/10/09/2016-10-09-github和gitlab同时使用ssh-key/" data-id="ciuqma4050002yhyntn2xeafs" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-2016-10-08-runtime小记" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/08/2016-10-08-runtime小记/" class="article-date">
  <time datetime="2016-10-08T06:41:01.000Z" itemprop="datePublished">2016-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/08/2016-10-08-runtime小记/">2016-10-08 runtime小记</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>runtime是一套比较底层的纯C语言API, 属于1个C语言库, 包含了很多底层的C语言API.<br>在我们平时编写的OC代码中,程序运行过程时, 其实最终都是转成了runtime的C语言代码, runtime算是OC的幕后工作者.<br>以下是自己在学习runtime过程中的一些总结. 不足之处还望海涵!</p>
<h2 id="1-相关的定义和类在runtime中的表示"><a href="#1-相关的定义和类在runtime中的表示" class="headerlink" title="1.相关的定义和类在runtime中的表示"></a>1.相关的定义和类在runtime中的表示</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">/// 描述类中的一个方法</div><div class="line">typedef struct objc_method *Method;</div><div class="line">/// 实例变量</div><div class="line">typedef struct objc_ivar *Ivar;</div><div class="line">/// 类别Category</div><div class="line">typedef struct objc_category *Category;</div><div class="line">/// 类中声明的属性</div><div class="line">typedef struct objc_property *objc_property_t;</div></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//类在runtime中的表示</div><div class="line">struct objc_class &#123;</div><div class="line">    Class isa;//指针，顾名思义，表示是一个什么，</div><div class="line">    //实例的isa指向类对象，类对象的isa指向元类</div><div class="line"><span class="comment">#if !__OBJC2__</span></div><div class="line">    Class super_class;  //指向父类</div><div class="line">    const char *name;  //类名</div><div class="line">    long version;</div><div class="line">    long info;</div><div class="line">    long instance_size</div><div class="line">    struct objc_ivar_list *ivars //成员变量列表</div><div class="line">    struct objc_method_list **methodLists; //方法列表</div><div class="line">    struct objc_cache *cache;//缓存</div><div class="line">    //一种优化，调用过的方法存入缓存列表，下次调用先找缓存</div><div class="line">    struct objc_protocol_list *protocols //协议列表</div><div class="line">    <span class="comment">#endif</span></div><div class="line">&#125; OBJC2_UNAVAILABLE;</div><div class="line">/* Use `Class` instead of `struct objc_class *` */</div></pre></td></tr></table></figure>
<h2 id="2-获取类的信息列表"><a href="#2-获取类的信息列表" class="headerlink" title="2.获取类的信息列表"></a>2.获取类的信息列表</h2><h4 id="通过runtime的一系列方法获取类的一些信息-包括属性列表、方法列表、成员变量列表、和遵循的协议列表"><a href="#通过runtime的一系列方法获取类的一些信息-包括属性列表、方法列表、成员变量列表、和遵循的协议列表" class="headerlink" title="通过runtime的一系列方法获取类的一些信息, 包括属性列表、方法列表、成员变量列表、和遵循的协议列表."></a>通过runtime的一系列方法获取类的一些信息, 包括属性列表、方法列表、成员变量列表、和遵循的协议列表.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line">unsigned int count;</div><div class="line">//获取属性列表</div><div class="line">objc_property_t *propertyList = class_copyPropertyList([self class], &amp;count);</div><div class="line"><span class="keyword">for</span> (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">    const char *propertyName = property_getName(propertyList[i]);</div><div class="line">    NSLog(@<span class="string">"property----&gt;%@"</span>, [NSString stringWithUTF8String:propertyName]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//获取方法列表</div><div class="line">Method *methodList = class_copyMethodList([self class], &amp;count);</div><div class="line"><span class="keyword">for</span> (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">    Method method = methodList[i];</div><div class="line">    NSLog(@<span class="string">"method----&gt;%@"</span>, NSStringFromSelector(method_getName(method)));</div><div class="line">&#125;</div><div class="line"> </div><div class="line">//获取成员变量列表</div><div class="line">Ivar *ivarList = class_copyIvarList([self class], &amp;count);</div><div class="line"><span class="keyword">for</span> (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">    Ivar myIvar = ivarList[i];</div><div class="line">    const char *ivarName = ivar_getName(myIvar);</div><div class="line">    NSLog(@<span class="string">"Ivar----&gt;%@"</span>, [NSString stringWithUTF8String:ivarName]);</div><div class="line">&#125;</div><div class="line">    </div><div class="line">//获取协议列表</div><div class="line">__unsafe_unretained Protocol **protocolList = class_copyProtocolList([self class], &amp;count);</div><div class="line"><span class="keyword">for</span> (unsigned int i=0; i&lt;count; i++) &#123;</div><div class="line">    Protocol *myProtocal = protocolList[i];</div><div class="line">    const char *protocolName = protocol_getName(myProtocal);</div><div class="line">    NSLog(@<span class="string">"protocol----&gt;%@"</span>, [NSString stringWithUTF8String:protocolName]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="3-扩展系统类属性"><a href="#3-扩展系统类属性" class="headerlink" title="3.扩展系统类属性"></a>3.扩展系统类属性</h2><h4 id="有时你会遇到一种情况-比如点击按钮响应事件的时候需要进行传值-这个时候你可以扩展UIButton类-为它添加属性来进行传值"><a href="#有时你会遇到一种情况-比如点击按钮响应事件的时候需要进行传值-这个时候你可以扩展UIButton类-为它添加属性来进行传值" class="headerlink" title="有时你会遇到一种情况, 比如点击按钮响应事件的时候需要进行传值, 这个时候你可以扩展UIButton类, 为它添加属性来进行传值."></a>有时你会遇到一种情况, 比如点击按钮响应事件的时候需要进行传值, 这个时候你可以扩展UIButton类, 为它添加属性来进行传值.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line">//添加点击事件</div><div class="line">button.someId=@<span class="string">"123456"</span>;</div><div class="line">button.buttonTypeNum=[NSNumber numberWithInt:10];</div><div class="line">[button addTarget:self action:@selector(buttonClick:) <span class="keyword">for</span>ControlEvents:UIControlEventTouchUpInside];</div><div class="line"></div><div class="line">//点击事件响应方法</div><div class="line">- (void)buttonClick:(UIButton *)sender&#123;</div><div class="line">    NSLog(@<span class="string">"%@,,,,,,%d"</span>,sender.someId,[sender.buttonTypeNum intValue]);</div><div class="line">&#125;</div><div class="line"></div><div class="line">//为Button添加属性</div><div class="line">static const char *someIdKey = <span class="string">"someId"</span>;</div><div class="line">static const char *buttonTypeNumKey = <span class="string">"buttonTypeNum"</span>;</div><div class="line">- (NSString *)someId</div><div class="line">&#123;</div><div class="line">    // 根据关联的key，获取关联的值。</div><div class="line">    <span class="built_in">return</span> objc_getAssociatedObject(self, someIdKey);</div><div class="line">&#125;</div><div class="line">- (void)<span class="built_in">set</span>SomeId:(NSString *)someId</div><div class="line">&#123;</div><div class="line">    // 第一个参数：给哪个对象添加关联</div><div class="line">    // 第二个参数：关联的key，通过这个key获取</div><div class="line">    // 第三个参数：关联的value</div><div class="line">    // 第四个参数:关联的策略</div><div class="line">    objc_setAssociatedObject(self, someIdKey, someId, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">&#125;</div><div class="line">- (NSNumber *)buttonTypeNum</div><div class="line">&#123;</div><div class="line">    <span class="built_in">return</span> objc_getAssociatedObject(self, buttonTypeNumKey);</div><div class="line">&#125;</div><div class="line">- (void)<span class="built_in">set</span>ButtonTypeNum:(NSNumber *)buttonTypeNum</div><div class="line">&#123;</div><div class="line">    objc_setAssociatedObject(self, buttonTypeNumKey, buttonTypeNum, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="4-访问修改私有属性"><a href="#4-访问修改私有属性" class="headerlink" title="4.访问修改私有属性"></a>4.访问修改私有属性</h2><h4 id="有两种方法可以访问其它类的私有属性-一种是通过KVC获取-一种是通过runtime访问并修改私有属性"><a href="#有两种方法可以访问其它类的私有属性-一种是通过KVC获取-一种是通过runtime访问并修改私有属性" class="headerlink" title="有两种方法可以访问其它类的私有属性, 一种是通过KVC获取, 一种是通过runtime访问并修改私有属性."></a>有两种方法可以访问其它类的私有属性, 一种是通过KVC获取, 一种是通过runtime访问并修改私有属性.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">PrivateAttribute *pa= [PrivateAttribute new];</div><div class="line">// count记录类所有属性变量的数量  IVar是runtime声明的一个宏</div><div class="line">unsigned int count = 0;</div><div class="line">// 获取类的所有属性变量</div><div class="line">Ivar *menbers = class_copyIvarList([PrivateAttribute class], &amp;count);</div><div class="line"></div><div class="line"><span class="keyword">for</span> (int i = 0; i &lt; count; i++) &#123;</div><div class="line">    Ivar ivar = menbers[i];</div><div class="line">    // 将IVar变量转化为字符串,这里获得了属性名</div><div class="line">    const char *memberName = ivar_getName(ivar);</div><div class="line">    NSLog(@<span class="string">"%s"</span>,memberName);</div><div class="line">    </div><div class="line">    Ivar m_name = menbers[0];</div><div class="line">    // 修改属性值</div><div class="line">    object_setIvar(pa, m_name, @<span class="string">"zhangsan"</span>);</div><div class="line">    // 打印后发现Father中name的值变为zhangsan</div><div class="line">    NSLog(@<span class="string">"%@"</span>,[pa description]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="5-交换系统类方法"><a href="#5-交换系统类方法" class="headerlink" title="5.交换系统类方法"></a>5.交换系统类方法</h2><h4 id="替换系统类的方法-或者对两个方法进行交换。使用的时候要全局考虑-比如一旦对UILabel的setText-方法进行交换-你就无法给UILabel设置text和UIButton设置title"><a href="#替换系统类的方法-或者对两个方法进行交换。使用的时候要全局考虑-比如一旦对UILabel的setText-方法进行交换-你就无法给UILabel设置text和UIButton设置title" class="headerlink" title="替换系统类的方法, 或者对两个方法进行交换。使用的时候要全局考虑, 比如一旦对UILabel的setText:方法进行交换, 你就无法给UILabel设置text和UIButton设置title."></a>替换系统类的方法, 或者对两个方法进行交换。使用的时候要全局考虑, 比如一旦对UILabel的setText:方法进行交换, 你就无法给UILabel设置text和UIButton设置title.</h4><h4 id="当系统自带的方法功能不够-给系统自带的方法扩展一些功能-并且保留原有的功能"><a href="#当系统自带的方法功能不够-给系统自带的方法扩展一些功能-并且保留原有的功能" class="headerlink" title="当系统自带的方法功能不够, 给系统自带的方法扩展一些功能, 并且保留原有的功能."></a>当系统自带的方法功能不够, 给系统自带的方法扩展一些功能, 并且保留原有的功能.</h4><h4 id="当然你也可以选择使用分类-重写系统方法"><a href="#当然你也可以选择使用分类-重写系统方法" class="headerlink" title="当然你也可以选择使用分类, 重写系统方法."></a>当然你也可以选择使用分类, 重写系统方法.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">+(void)load</div><div class="line">&#123;</div><div class="line">    //获取imageNamed方法地址</div><div class="line">    Method imageNamed = class_getClassMethod(self, @selector(imageNamed:));</div><div class="line">    //获取分类添加的imageNamed方法地址</div><div class="line">    Method myImageNamed = class_getClassMethod(self, @selector(myImageNamed:));</div><div class="line">    //交换方法地址，交换方法实现</div><div class="line">    method_exchangeImplementations(myImageNamed, imageNamed);</div><div class="line">    [super load];</div><div class="line">&#125;</div><div class="line">+(UIImage *)myImageNamed:(NSString *)name</div><div class="line">&#123;</div><div class="line">    //1.加载图片</div><div class="line">    UIImage *image = [UIImage myImageNamed:name];</div><div class="line">    <span class="keyword">if</span> (image == nil) &#123;</div><div class="line">        NSLog(@<span class="string">"加载失败"</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">return</span> image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="6-拦截方法调用"><a href="#6-拦截方法调用" class="headerlink" title="6.拦截方法调用"></a>6.拦截方法调用</h2><h4 id="如果一个类方法非常多-加载了到内存的时候也比较耗费资源-需给每个方法生成映射表-可以使用动态给某个类-添加方法解决"><a href="#如果一个类方法非常多-加载了到内存的时候也比较耗费资源-需给每个方法生成映射表-可以使用动态给某个类-添加方法解决" class="headerlink" title="如果一个类方法非常多,加载了到内存的时候也比较耗费资源,需给每个方法生成映射表,可以使用动态给某个类,添加方法解决."></a>如果一个类方法非常多,加载了到内存的时候也比较耗费资源,需给每个方法生成映射表,可以使用动态给某个类,添加方法解决.</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">void runAddMethod(id self, SEL _cmd, NSString *string)&#123;</div><div class="line">    NSLog(@<span class="string">"add C IMP %@"</span>, string);</div><div class="line">&#125;</div><div class="line">+ (BOOL)resolveClassMethod:(SEL)sel&#123;</div><div class="line">    <span class="built_in">return</span> YES;</div><div class="line">&#125;</div><div class="line">+ (BOOL)resolveInstanceMethod:(SEL)sel&#123;</div><div class="line">    //给本类动态添加一个方法</div><div class="line">    <span class="keyword">if</span> ([NSStringFromSelector(sel) isEqualToString:@<span class="string">"resolveAdd:"</span>]) &#123;</div><div class="line">        class_addMethod(self, sel, (IMP)runAddMethod, <span class="string">"v@:*"</span>);</div><div class="line">         NSLog(@<span class="string">"LWInterceptFunction:拦截到resolveAdd方法"</span>);</div><div class="line">    &#125;</div><div class="line">    //不管YES or NO 只要方法不存在，则进入forwardingTargetForSelector</div><div class="line">    <span class="built_in">return</span> YES;</div><div class="line">- (id)forwardingTargetForSelector:(SEL)sel&#123;</div><div class="line">    //动态转发一个方法到LWFunctionAccept类</div><div class="line">    <span class="keyword">if</span> ([NSStringFromSelector(sel) isEqualToString:@<span class="string">"resolveForward:"</span>]) &#123;</div><div class="line">        NSLog(@<span class="string">"LWInterceptFunction:拦截到resolveForward方法，并转发"</span>);</div><div class="line">        <span class="built_in">return</span> [[LWFunctionAccept alloc]init];</div><div class="line">    &#125;</div><div class="line">    //如果返回的是nil，则进入forwardInvocation</div><div class="line">    <span class="built_in">return</span> nil;</div><div class="line">&#125;</div><div class="line">- (void)forwardInvocation:(NSInvocation *)anInvocation &#123;</div><div class="line">    NSLog(@<span class="string">"NSInvocation~~~~%@"</span>, [anInvocation description]);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="7-测试代码"><a href="#7-测试代码" class="headerlink" title="7.测试代码"></a>7.测试代码</h2><p> <a href="https://github.com/AloesLu/LWRuntimeTest">GitHub Code</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/AloesLu/2016/10/08/2016-10-08-runtime小记/" data-id="ciuqma4010001yhynjctvi8m6" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/09/22/hello-world/" class="article-date">
  <time datetime="2016-09-22T03:16:31.000Z" itemprop="datePublished">2016-09-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/09/22/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="external">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="external">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="external">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo new <span class="string">"My New Post"</span></div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="external">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo server</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="external">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo generate</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="external">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ hexo deploy</div></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="external">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://github.com/AloesLu/2016/09/22/hello-world/" data-id="ciuqma4090003yhyn3cw0w5hi" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/26/2016-10-26-重新认识Objective-C第一篇/">2016-10-26 重新认识Objective-C第一篇</a>
          </li>
        
          <li>
            <a href="/2016/10/09/2016-10-09-github和gitlab同时使用ssh-key/">2016-10-09 github和gitlab同时使用ssh-key</a>
          </li>
        
          <li>
            <a href="/2016/10/08/2016-10-08-runtime小记/">2016-10-08 runtime小记</a>
          </li>
        
          <li>
            <a href="/2016/09/22/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 Aloes Lu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>